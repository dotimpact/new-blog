<p><a href="https://github.com/dotimpact/pdf-db-spec">dotimpact/pdf-db-spec: mysqlの既存テーブルからpdfのドキュメントを作る</a></p>
<hr>
<p>いまやってる仕事（わりと堅い）で詳細仕様書の一部としてDBのテーブル定義書を作ることになり、手でつくるのは面倒なのでDBマイグレーションツールで作成したDBのテーブルと初期データをドキュメント化する方法をいろいろ試して、最終的にMysqlのXML/HTML出力を加工してpdfにするスクリプトを作ったので公開しておいた。Mysql限定で、wkhtmltopdfも必要。</p>
<p>最初<a href="http://tk0miya.hatenablog.com/entry/2013/12/12/012054">schema2rst</a>を試して、Htmlドキュメントとしてはなかなかよかったんだけど、ドキュメントとして共有するのにpdf化するにはあんまり向いてなかったので、<a href="http://mariyudu.hatenablog.com/entry/2015/02/01/200517">続・MySQL データベースからテーブル定義書を生成する - 私と私の猫の他は誰でも隠し事を持っている</a>の出力をwkhtmltopdfでpdfにするアプローチにした（xsltとhtmlのスタイルはほぼそのまま使ってます。ありがとうございます）。wkhtmltopdfでレンダリングされるhtmlドキュメントのサイズがあんまりうまく制御できなかったので、<code>--zoom</code>で適当に拡大している。あと長いテーブルの途中で改行されるときにテーブルヘッドがちゃんと表示されるように</p>
<code>
thead { display: table-header-group }
tfoot { display: table-row-group }
tr { page-break-inside: avoid }
</code>
<p>を入れた。</p>
<p>あと、今回DBマイグレーションツールに<a href="https://phinx.org/">Phinx</a>を使ってみたらわりと便利でよかった。ほんとはこれのマイグレーションにフックしてドキュメントを生成できたるするといいのかな。</p>
